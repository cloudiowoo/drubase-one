# BaaS Platform

ä¼ä¸šçº§Backend-as-a-Serviceå¹³å°ï¼ŒåŸºäºDrupal 11æ„å»ºçš„ç°ä»£åŒ–åç«¯æœåŠ¡ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¢ **å¤šç§Ÿæˆ·æ¶æ„** - å®Œå…¨éš”ç¦»çš„å¤šç§Ÿæˆ·æ•°æ®ç®¡ç†
- ğŸ” **ç»Ÿä¸€è®¤è¯** - JWTã€API Keyã€Sessionå¤šç§è®¤è¯æ–¹å¼
- ğŸ“Š **åŠ¨æ€å®ä½“** - æ— éœ€ç¼–ç¨‹å³å¯åˆ›å»ºå’Œç®¡ç†æ•°æ®æ¨¡å‹
- ğŸš€ **é¡¹ç›®ç®¡ç†** - çµæ´»çš„é¡¹ç›®ç»„ç»‡å’Œæƒé™æ§åˆ¶ç³»ç»Ÿ
- âš¡ **å‡½æ•°æœåŠ¡** - æ”¯æŒæ— æœåŠ¡å™¨å‡½æ•°å’Œè‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘
- ğŸ“± **å®æ—¶åŠŸèƒ½** - WebSocketå®æ—¶é€šä¿¡æ”¯æŒ
- ğŸ¯ **APIç½‘å…³** - ç»Ÿä¸€çš„APIç®¡ç†ã€ç›‘æ§å’Œé™æµ
- ğŸ“ **æ–‡ä»¶ç®¡ç†** - å®‰å…¨çš„æ–‡ä»¶ä¸Šä¼ ã€å­˜å‚¨å’Œç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- Docker >= 20.0
- Docker Compose >= 2.0
- 4GB+ å†…å­˜
- 10GB+ ç£ç›˜ç©ºé—´

### ä¸€é”®å®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/baas-platform.git
cd baas-platform

# 2. è¿è¡Œå®‰è£…è„šæœ¬
./install.sh

# 3. è®¿é—®å¹³å°
open http://localhost
```

### é»˜è®¤ç™»å½•ä¿¡æ¯

- **ç®¡ç†å‘˜è´¦å·**: admin
- **é»˜è®¤å¯†ç **: admin123
- **ç®¡ç†ç•Œé¢**: http://localhost/admin
- **APIæ–‡æ¡£**: http://localhost/api/docs

## ğŸ—ï¸ æ¶æ„æ¦‚è¿°

BaaS Platformé‡‡ç”¨ç°ä»£åŒ–å¾®æœåŠ¡æ¶æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Webåº”ç”¨       â”‚    â”‚   APIç½‘å…³        â”‚    â”‚   å‡½æ•°æœåŠ¡       â”‚
â”‚   (Drupal 11)   â”‚    â”‚   (ç»Ÿä¸€å…¥å£)     â”‚    â”‚   (Node.js)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL    â”‚    â”‚     Redis       â”‚    â”‚   æ–‡ä»¶å­˜å‚¨       â”‚
â”‚   (ä¸»æ•°æ®åº“)     â”‚    â”‚   (ç¼“å­˜)        â”‚    â”‚   (æœ¬åœ°/äº‘)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“š æ ¸å¿ƒæ¦‚å¿µ

### ç§Ÿæˆ· (Tenants)
- æ•°æ®å®Œå…¨éš”ç¦»çš„ç»„ç»‡å•ä½
- æ¯ä¸ªç§Ÿæˆ·æœ‰ç‹¬ç«‹çš„æ•°æ®ç©ºé—´å’Œé…ç½®
- æ”¯æŒå­ç§Ÿæˆ·å’Œå±‚çº§ç®¡ç†

### é¡¹ç›® (Projects)  
- ç§Ÿæˆ·å†…çš„ä¸šåŠ¡é¡¹ç›®ç»„ç»‡å•ä½
- çµæ´»çš„æˆå‘˜æƒé™å’Œè§’è‰²ç®¡ç†
- èµ„æºä½¿ç”¨ç›‘æ§å’Œé™åˆ¶

### å®ä½“ (Entities)
- åŠ¨æ€åˆ›å»ºçš„æ•°æ®æ¨¡å‹
- æ”¯æŒå­—æ®µç±»å‹ï¼šæ–‡æœ¬ã€æ•°å­—ã€æ—¥æœŸã€æ–‡ä»¶ã€å¼•ç”¨ç­‰
- RESTful APIè‡ªåŠ¨ç”Ÿæˆ

### å‡½æ•° (Functions)
- æ— æœåŠ¡å™¨å‡½æ•°æ”¯æŒ
- äº‹ä»¶é©±åŠ¨çš„ä¸šåŠ¡é€»è¾‘å¤„ç†
- æ”¯æŒå¤šç§è§¦å‘å™¨ï¼šHTTPã€æ•°æ®å˜æ›´ã€å®šæ—¶ä»»åŠ¡

## ğŸ”§ é…ç½®ç®¡ç†

### ç¯å¢ƒå˜é‡

```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_NAME=baas_platform
DB_USER=baas_user
DB_PASSWORD=your_secure_password

# Redisç¼“å­˜
REDIS_HOST=localhost
REDIS_PORT=6379

# åº”ç”¨é…ç½®
APP_ENV=production
APP_SECRET=your-app-secret
SITE_NAME=BaaS Platform

# APIé…ç½®
API_RATE_LIMIT_USER=60
API_RATE_LIMIT_IP=30
```

### ç®¡ç†é…ç½®

è®¿é—® `/admin/config/baas` è¿›è¡Œç³»ç»Ÿé…ç½®ï¼š
- ç§Ÿæˆ·ç®¡ç†å’Œé…ç½®
- APIé™æµå’Œç›‘æ§è®¾ç½®
- å®ä½“æ¨¡æ¿ç®¡ç†
- å‡½æ•°æœåŠ¡é…ç½®

## ğŸŒ API ä½¿ç”¨

### è®¤è¯

```bash
# è·å–è®¿é—®ä»¤ç‰Œ
curl -X POST http://localhost/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "admin123"}'
```

### æ•°æ®æ“ä½œ

```bash
# è·å–å®ä½“åˆ—è¡¨
curl -X GET "http://localhost/api/v1/tenant_id/projects/project_id/entities/users" \
  -H "Authorization: Bearer YOUR_TOKEN"

# åˆ›å»ºæ•°æ®
curl -X POST "http://localhost/api/v1/tenant_id/projects/project_id/entities/users" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"name": "John Doe", "email": "john@example.com"}'
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### è‡ªå®šä¹‰æ¨¡å—å¼€å‘

```php
<?php
// web/modules/custom/my_baas_module/my_baas_module.module

/**
 * å®ç°hook_baas_entity_presave()
 */
function my_baas_module_baas_entity_presave($entity_data, $context) {
  // è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘
  $entity_data['created_time'] = time();
  return $entity_data;
}
```

### å‡½æ•°æœåŠ¡å¼€å‘

```javascript
// services/functions/my-function/index.js
exports.handler = async (event, context) => {
  // å¤„ç†ä¸šåŠ¡é€»è¾‘
  return {
    statusCode: 200,
    body: JSON.stringify({
      message: 'Function executed successfully',
      data: event.data
    })
  };
};
```

## ğŸ” ç›‘æ§å’Œç»´æŠ¤

### ç³»ç»Ÿç›‘æ§

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f [service-name]

# æ•°æ®åº“çŠ¶æ€æ£€æŸ¥
docker-compose exec db pg_isready
```

### æ€§èƒ½ä¼˜åŒ–

- å¯ç”¨Redisç¼“å­˜
- é…ç½®é€‚å½“çš„APIé™æµ
- å®šæœŸæ¸…ç†æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶
- ç›‘æ§æ•°æ®åº“æ€§èƒ½

## ğŸ¤ ç¤¾åŒºæ”¯æŒ

- **æ–‡æ¡£**: è¯¦ç»†ä½¿ç”¨æ–‡æ¡£è¯·å‚è€ƒå®‰è£…åçš„ç³»ç»Ÿå¸®åŠ©
- **é—®é¢˜æŠ¥å‘Š**: [GitHub Issues](https://github.com/your-username/baas-platform/issues)
- **åŠŸèƒ½è¯·æ±‚**: [GitHub Discussions](https://github.com/your-username/baas-platform/discussions)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚è€ƒ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºæ”¹è¿›å»ºè®®ï¼

---

**ç‰ˆæœ¬**: dev  
**æ›´æ–°æ—¶é—´**: 2025-10-10 23:22:18 UTC  
**å®˜æ–¹ç½‘ç«™**: https://baas-platform.com